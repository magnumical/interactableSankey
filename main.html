<!-- wp:html -->
<html>
  <body>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- Diagram with Improved Flow -->
    <div id="sankey_chart" style="width: 800px; height: 600px;"></div>

    <script type="text/javascript">
      google.charts.load("current", { packages: ["sankey"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn("string", "From");
        data.addColumn("string", "To");
        data.addColumn("number", "Weight");
        data.addRows([
          // First Layer: Organizations to Fields
          ["Lady Davis Institute", "Machine Learning", 1000],
          ["Lady Davis Institute", "Data Science", 700],
          ["Huawei", "Machine Learning", 900],
          ["Huawei", "Data Science", 600],
          ["Huawei", "Physiological Computing", 500],
          ["MuSAE Lab", "Machine Learning", 900],
          ["MuSAE Lab", "Virtual Reality", 800],
          ["MuSAE Lab", "Physiological Computing", 500],
          ["Université du Québec at Outaouais", "Virtual Reality", 800],
          ["Université du Québec at Outaouais", "Machine Learning", 900],

          // Second Layer: Fields to Subfields
          ["Machine Learning", "Supervised Learning", 1200],
          ["Supervised Learning", "Ensemble Learning", 400],
          ["Supervised Learning", "Regularization", 400],
          ["Supervised Learning", "Federated Learning", 400],
          ["Machine Learning", "Deep Learning", 1000],
          ["Deep Learning", "Large Language Models", 400],
          ["Deep Learning", "Natural Language Processing", 400],
          ["Deep Learning", "Speech Recognition", 200],
          ["Machine Learning", "Interpretable ML", 800],
          ["Interpretable ML", "Model Visualization", 300],
          ["Interpretable ML", "Bias Detection", 300],
          ["Interpretable ML", "Fairness Metrics", 200],
          ["Machine Learning", "Multi-modal ML", 700],
          ["Multi-modal ML", "Cross-domain Learning", 350],
          ["Multi-modal ML", "Data Fusion", 350],

          // Data Science Subfields
          ["Data Science", "Dimensionality Reduction", 500],
          ["Dimensionality Reduction", "Feature Selection", 200],
          ["Dimensionality Reduction", "Principal Component Analysis", 150],
          ["Dimensionality Reduction", "Latent Semantic Analysis", 150],
          ["Data Science", "Data Visualization", 300],
          ["Data Science", "Statistical Analysis", 300],
          ["Data Science", "Data Cleaning", 200],

          // Physiological Computing Subfields
          ["Physiological Computing", "Health Monitoring", 300],
          ["Physiological Computing", "Wearable Sensors", 200],
          ["Physiological Computing", "Biofeedback Systems", 300],
          ["Physiological Computing", "Multi-modal Signal Analysis", 200],

          // Virtual Reality Subfields
          ["Virtual Reality", "Game Development", 400],
          ["Virtual Reality", "Therapeutic Applications", 400],
          ["Virtual Reality", "User Experience Design", 400],
          ["Virtual Reality", "Immersive Simulations", 400],
          ["Immersive Simulations", "Multi-sensory Feedback", 200],
          ["Immersive Simulations", "Interactive Interfaces", 200],
        ]);

        var options = {
          width: 850,
          height: 600,
          sankey: {
            tooltip: { 
              trigger: "focus", // Enable tooltips for customization
              isHtml: true      // Use custom HTML for tooltips
            },
            link: {
              colorMode: "gradient",
              colors: [
                "#D88C9A", "#F2D0A9", "#F1E3D3", "#99C1B9", "#8E7DBE",
              ],
            },
            node: {
              colors: [
                "#D88C9A", "#F2D0A9", "#F1E3D3", "#99C1B9", "#8E7DBE",
              ],
              label: {
                fontName: "Arial",
                fontSize: 12,
                color: "#333",
              },
            },
          },
        };

        var chart = new google.visualization.Sankey(
          document.getElementById("sankey_chart")
        );
        chart.draw(data, options);

        // Customize tooltips on hover
        google.visualization.events.addListener(chart, 'onmouseover', function () {
          // Modify tooltip content
          document.querySelectorAll('.google-visualization-tooltip').forEach(tooltip => {
            tooltip.innerHTML = '.'; // Change to '' for an empty tooltip
          });
        });
      }
    </script>
  </body>
</html>
<!-- /wp:html -->
