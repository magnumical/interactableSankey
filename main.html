<html>
  <body>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- Diagram with Custom Tooltip -->
    <div id="sankey_chart" style="width: 750px; height: 450px;"></div>

    <script type="text/javascript">
      google.charts.load("current", { packages: ["sankey"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn("string", "From");
        data.addColumn("string", "To");
        data.addColumn("number", "Weight");
        data.addRows([
          // First Layer: Organizations to Fields
          ["Lady Davis Institute", "Machine Learning", 900],
          ["Lady Davis Institute", "Data Science", 700],
          ["Huawei", "Machine Learning", 900],
          ["Huawei", "Data Science", 600],
          ["Huawei", "Physiological Computing", 500],
          ["MuSAE Lab", "Machine Learning", 900],
          ["MuSAE Lab", "Virtual Reality", 800],
          ["MuSAE Lab", "Physiological Computing", 700],
          ["Université du Québec at Outaouais", "Virtual Reality", 800],
          ["Université du Québec at Outaouais", "Machine Learning", 900],

          // Second Layer: Fields to Subfields
          ["Machine Learning", "Regression | Classification | Clustering", 1200],
          ["Regression | Classification | Clustering", "Ensemble Learning", 400],
          ["Regression | Classification | Clustering", "Regularization", 400],
          ["Regression | Classification | Clustering", "Federated Learning", 400],
          ["Machine Learning", "Deep Learning", 1000],
          ["Deep Learning", "Large Language Models", 400],
          ["Deep Learning", "NLPS", 400],
          ["Deep Learning", "TTS I STT", 200],
          ["Machine Learning", "Interpretable ML", 800],
          ["Interpretable ML", "Partial Dependence Plot", 300],
          ["Interpretable ML", "Accumulated Local Effects", 300],
          ["Interpretable ML", "Model Fairness", 200],
          ["Machine Learning", "Multi-modal ML", 700],
          ["Multi-modal ML", "RAG", 350],
          ["Multi-modal ML", "Data Fusion Concepts", 350],

          // Data Science Subfields
          ["Data Science", "Dimensionality Reduction", 500],
          ["Dimensionality Reduction", "Feature Selection", 200],
          ["Dimensionality Reduction", "Feature Projection", 150],
          ["Dimensionality Reduction", "Feature Extraction", 150],
          ["Data Science", "Visualization", 300],
          ["Data Science", "Statistical Analysis", 300],
          ["Data Science", "Data Cleaning and Preparation", 200],

          // Physiological Computing Subfields
          ["Physiological Computing", "Biofeedback", 300],
          ["Physiological Computing", "Human-Computer Interaction", 300],
          ["Physiological Computing", "Health Monitoring", 300],
          ["Physiological Computing", "Multi-Modal Signal Processing", 200],
          ["Physiological Computing", "Wearable Technology", 200],

          // Virtual Reality Subfields
          ["Virtual Reality", "Game Development", 400],
          ["Virtual Reality", "Therapeutic Applications", 400],
          ["Virtual Reality", "User Experience in VR", 400],
          ["Virtual Reality", "Immersive Experiences", 400],
          ["Immersive Experiences", "Multisensory Integration", 200],
          ["Immersive Experiences", "User Interface Design", 200],
        ]);

        var options = {
          width: 750,
          height: 450,
          sankey: {
            tooltip: { 
              trigger: "focus", // Enable tooltips for customization
              isHtml: true      // Use custom HTML for tooltips
            },
            link: {
              colorMode: "gradient",
              colors: [
                "#D88C9A", // Soft Rose
                "#F2D0A9", // Pale Peach
                "#F1E3D3", // Cream White
                "#99C1B9", // Light Teal
                "#8E7DBE", // Lavender
              ],
            },
            node: {
              colors: [
                "#D88C9A", "#F2D0A9", "#F1E3D3", "#99C1B9", "#8E7DBE",
              ],
              label: {
                fontName: "Arial",
                fontSize: 12,
                color: "#333",
              },
            },
          },
        };

        var chart = new google.visualization.Sankey(
          document.getElementById("sankey_chart")
        );
        chart.draw(data, options);

        // Customize tooltips on hover
        google.visualization.events.addListener(chart, 'onmouseover', function () {
          // Modify tooltip content
          document.querySelectorAll('.google-visualization-tooltip').forEach(tooltip => {
            tooltip.innerHTML = '.'; // Change to '' for an empty tooltip
          });
        });
      }
    </script>
  </body>
</html>
